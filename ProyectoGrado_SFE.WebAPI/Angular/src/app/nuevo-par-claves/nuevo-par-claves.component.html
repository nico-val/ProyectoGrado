
<h2> Crear nuevo par de claves</h2>

<form (ngSubmit)="onSubmit(nuevaClaveForm)" #nuevaClaveForm="ngForm">
    <div class="form-horizontal">
        <hr>

        <h4>Ingrese los datos para la Solicitud de Firmado de Certificado:</h4>                

        <div class="form-group">
            <label class="col-md-2 control-label" for="NombreIdentificativo">Nombre Identificativo</label>
            <div class="col-md-10">
                <input class="form-control" type="text" required name="nombreIdentificativo" [(ngModel)]="model.nombreIdentificativo" #nombreIdentificativo="ngModel">                
                <small id="fileHelp" class="form-text text-muted">Nombre con el que identificará al par de claves.</small>                                
            </div>
        </div>

        <div class="panel panel-default">
            <div class="panel-heading">Datos para la Solicitud de Firmado de Certificado (PKCS#10)</div>
            <div class="panel-body">

                <div class="form-group">
                    <label class="col-md-2 control-label" for="CommonName">Nombre Común</label>
                    <div class="col-md-10">
                        <input class="form-control" type="text" name="commonName" [(ngModel)]="model.commonName" #commonName="ngModel" required>
                        <small id="fileHelp" class="form-text text-muted">Nombre de la persona o entidad dueña del par de claves.</small>
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-md-2 control-label" for="Organization">Organización</label>
                    <div class="col-md-10">
                        <input class="form-control" type="text" name="organization" [(ngModel)]="model.organization" #organization="ngModel" required>
                    </div>
                </div>


                <div class="form-group">
                    <label class="col-md-2 control-label" for="OrganizationUnit">Unidad Organizacional</label>
                    <div class="col-md-10">
                        <input class="form-control" type="text" name="organizationUnit" [(ngModel)]="model.organizationUnit" #organizationUnit="ngModel" required>
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-md-2 control-label" for="City">Ciudad</label>
                    <div class="col-md-10">
                        <input class="form-control" type="text" name="city" [(ngModel)]="model.city" #city="ngModel" required>
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-md-2 control-label" for="State">Estado</label>
                    <div class="col-md-10">
                        <input class="form-control" type="text" name="state" [(ngModel)]="model.state" #state="ngModel" required>
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-md-2 control-label" for="CountryIso2Characters">País (2 caracteres)</label>
                    <div class="col-md-10">
                        <input class="form-control" type="text" name="countryIso2Characters" [(ngModel)]="model.countryIso2Characters" maxlength="2" #countryIso2Characters="ngModel" required>

                    </div>
                </div>

                <div class="form-group">
                    <label class="col-md-2 control-label" for="Email">Email</label>
                    <div class="col-md-10">
                        <input class="form-control" type="email" name="email" [(ngModel)]="model.email" #email="ngModel" required>
                        <span class="text-danger field-validation-valid" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                    </div>
                </div>
            </div>
        </div>
        <div class="form-group">
            <label class="col-md-2 control-label" for="NombreIdentificativo">Contraseña</label>
            <div class="col-md-10">
                <input class="form-control" type="password" required name="password" [(ngModel)]="model.password" #password="ngModel">
                <small id="fileHelp" class="form-text text-muted">Debe reingresar su contraseña, para encriptar su nueva clave privada.</small>
            </div>
        </div>
        <div *ngIf="nuevaClaveForm.submitted && !nuevaClaveForm.valid">
            <p class="text-danger field-validation-valid">Debe completar todos los campos.</p>
        </div>
        <div *ngIf="errorMessage">
            <p class="text-danger field-validation-valid">{{this.errorMessage}}</p>
        </div>
        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Crear par de claves y enviar Solicitud" class="btn btn-default">
            </div>
        </div>
    </div>
</form>

<div>
    <a [routerLink]="['/Claves']">Volver a la lista</a>
</div>