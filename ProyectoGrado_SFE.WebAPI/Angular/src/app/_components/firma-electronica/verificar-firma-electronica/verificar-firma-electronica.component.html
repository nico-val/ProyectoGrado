<h2>Verificar Firma Electronica</h2>

<form (ngSubmit)="onSubmit()">
    <div class="form-horizontal">
        <div class="form-group">
            <label class="col-md-2 control-label">Archivo</label>
            <div class="col-md-10">
                <div class="input-group">
                    <label class="input-group-btn">
                        <span class="btn btn-primary">
                            Elegir archivo&hellip; <input type="file" name="Archivo" style="display: none;" (change)="onChangeArchivo($event)">
                        </span>
                    </label>
                    <input type="text" class="form-control" readonly value="{{this.fileName}}">
                </div>
            </div>
        </div>

        <div class="form-group">
            <label class="col-md-2 control-label">Firma Electrónica</label>
            <div class="col-md-10">
                <div class="input-group">
                    <label class="input-group-btn">
                        <span class="btn btn-primary">
                            Elegir archivo&hellip; <input type="file" name="ArchivoFirmaElectronica" style="display: none;" (change)="onChangeFirmaElectronica($event)">
                        </span>
                    </label>
                    <input type="text" class="form-control" readonly value="{{this.digitalSignatureFileName}}">
                </div>
            </div>
        </div>

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Verificar" class="btn btn-default" />
            </div>
        </div>
    </div>
</form>



<div *ngIf="this.resultadoVerificacion != null && this.resultadoVerificacion.result == true">

    <div class="alert alert-success" role="alert">
        <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
        El archivo es auténtico, verifica con la firma electrónica.
    </div>

    <div class="panel panel-default">
        <div class="panel-heading">Datos del archivo</div>
        <div class="panel-body">
            <dl>
                <dt>
                    Nombre
                </dt>
                <dd>
                    {{this.resultadoVerificacion.fileName}}
                </dd>
                <dt>
                    Tamaño
                </dt>
                <dd>
                    {{this.resultadoVerificacion.fileSize}} bytes
                </dd>
                <dt>
                    Hash
                </dt>
                <dd>
                    {{this.resultadoVerificacion.fileHash}}
                </dd>
            </dl>

        </div>


    </div>
    <div class="panel panel-default">
        <div class="panel-heading">Datos del firmante</div>
        <div class="panel-body">
            <dl>
                <dt>
                    Nombre común
                </dt>
                <dd>
                    {{this.resultadoVerificacion.subject.cn}}
                </dd>

                <dt>
                    Unidad organizacional
                </dt>
                <dd>
                    {{this.resultadoVerificacion.subject.ou}}
                </dd>

                <dt>
                    Organización
                </dt>
                <dd>
                    {{this.resultadoVerificacion.subject.o}}
                </dd>

                <dt>
                    Provincia/Estado
                </dt>
                <dd>
                    {{this.resultadoVerificacion.subject.s}}
                </dd>

                <dt>
                    País
                </dt>
                <dd>
                    {{this.resultadoVerificacion.subject.c}}
                </dd>
            </dl>
        </div>

    </div>
</div>

<div *ngIf="this.resultadoVerificacion != null && this.resultadoVerificacion.result == false">
    <div class="alert alert-danger" role="alert">
        <span class="glyphicon glyphicon-alert" aria-hidden="true"></span>
        El archivo fue alterado, no verifica con la firma electrónica.
    </div>
</div>

<div *ngIf="this.resultadoVerificacion != null && this.resultadoVerificacion.result == false">
    <div class="alert alert-danger" role="alert">
        <span class="glyphicon glyphicon-alert" aria-hidden="true"></span>
        El archivo fue alterado, no verifica con la firma electrónica.
    </div>
</div>

